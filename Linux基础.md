## 操作系统基础

### 操作系统基本概念

**什么是****操作系统****？**

- Windows？Linux？MacOS？Android？
    

操作系统（OS）是管理计算机硬件与软件资源的系统软件，它是用户和计算机硬件之间的接口。

操作系统可以理解为是一个特殊的“程序”。

### 操作系统基本功能

1. **进程管理**
    
    1. 进程的创建、执行、暂停和终止
        
    2. 操作系统必须有效地分配和回收进程所需的资源，如CPU时间、内存等
        
    3. 进程同步和通信机制，以及处理死锁问题
        
2. **内存****管理**
    
    1. 协调物理内存和虚拟内存资源的机制
        
    2. 追踪每一块内存的使用情况，决定何时加载和替换数据到内存，以及如何分配内存给各个程序
        
    3. 分页和分段，内存保护等
        
3. **文件管理**
    
    1. 文件的存储、检索、组织和保护
        
    2. 文件系统布局、访问控制
        
4. **设备管理**
    
    1. 负责协调所有外围设备的操作，包括输入设备（如键盘、鼠标）、输出设备（如显示器、打印机）和存储设备（如硬盘、USB驱动器）
        
    2. 驱动程序，设备调度
        
5. **用户接口**
    
    1. 允许用户与操作系统交互，包括命令行界面（CLI）和图形用户界面（GUI）
        
    2. 通过用户接口提供命令解释、任务管理、文件操作等功能
        

  

### 系统调用

- 系统调用是操作系统提供的一种编程接口，它允许用户空间的应用程序请求操作系统内核提供的服务。这些服务包括硬件操作、创建和执行进程、管理文件系统等等。
    
- 系统调用是用户程序与操作系统之间的桥梁，使得用户程序能够在不直接干涉核心系统操作的情况下执行需要更高权限的操作。
    

#### 系统调用的例子

- **文件操作**：如`open()`, `read()`, `write()`, `close()`等，这些调用处理文件的打开、读取、写入和关闭。
    
- **进程控制**：如`fork()`, `exec()`, `exit()`等，用于控制进程的生命周期。
    
- **通信**：如`socket()`, `bind()`, `connect()`等，用于网络通信。
    
- **设备管理**：如控制打印机、读取系统时间等。
    

  

### 多线程

**问题：单****CPU****的机器上你可以同时运行多个程序吗？**

在单核心处理器上实现并发，主要依靠操作系统的调度策略，即时间分片（Time Slicing）和上下文切换（Context Switching）。

- 时间分片：操作系统将CPU时间分割成多个短片段，每个线程轮流使用这些时间片来执行。尽管实际上在任意给定时刻只有一个线程在执行，但由于切换非常迅速，给用户的感觉就像多个线程同时在执行。
    
- 上下文切换：在从一个线程切换到另一个线程前，操作系统保存当前线程的状态（上下文），然后加载下一个线程的上下文。这使得每个线程看起来都有自己独立的执行线。
    

#### 实时与分时操作系统

- 实时操作系统（RTOS）：需要在严格的时间限制内响应输入或事件的系统。它们保证了特定操作在给定时间内完成，常用于控制机器或处理机器之间的通信等场合。
    
    - 实时操作系统可以保证任务在一个最小的时间颗粒内执行完毕
        
    - 支持任务优先级抢占
        
- 分时操作系统：允许多个用户或多个程序似乎同时使用计算机。通过时间共享技术，CPU的时间被分配给所有用户和程序，使得每个用户都感觉像独占资源一样。
    
    - 分时系统以时间片管理进程
        
    
    ![](https://diangroup.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2Q2ODI2Mjk2MWQ4ODdjZDhiOWEzMGU4ZTc5NmFlMjlfMkJMc2tsbjBTdUd6ZWwwbnc2M2dpdVVEcFdrRWJZc2RfVG9rZW46SEJqZ2JJbk01b01MMFZ4Zk5sR2NhWGZabk5mXzE3MjgyMDYzMzM6MTcyODIwOTkzM19WNA)
    

  

现代操作系统中，_进程_被进一步切分，处理机调度的基本单位从进程变成了_线程_

操作系统分配资源的最小单位是进程，进程调度的最小单位是线程

  

#### 多进程/多线程可能存在的问题

1. 进程间/线程间通信
    
    1. 共享内存
        
    2. 信号（signal）
        
    3. 管道（pipe）
        
    4. 套接字（socket）——网络通信本质是进程间通信，socket可以跨进程、跨设备、跨主机
        
2. 争夺有限的资源（互斥）
    
    1. 操作系统分配资源的最小单位是进程，进程调度的最小单位是线程
        
3. 线程之间的协作（同步）
    
    1. 死锁：两个或以上程序循环等待资源
        

  

### 内存管理

**问题：指针是什么？地址是什么？**

- 内存：是计算机中用来暂时存储和搬运正在被CPU处理的数据的地方。
    
- 指针：是变量的一种，其内容是一个内存地址。
    
- 内存地址：是指向计算机主存（RAM）中特定位置的数字标识。每个内存单元都有一个唯一的地址，计算机使用这些地址来访问存储在内存中的数据。
    
    - 物理地址：指内存条上实际物理存储单元的位置。
        
    - 虚拟地址：由操作系统管理，用于给应用程序提供一个连续的地址空间，实际上它们可能被映射到物理内存的非连续区域。在Windows和Linux上，我们在程序中接触到的地址都是虚拟地址。每个程序的虚拟地址都是从0x0开始的，虚拟地址的空间可能大于实际物理地址空间。
        

  

#### 内存管理方式

- 段式内存管理：内存分为逻辑上的段，如代码段、数据段等，每个段可以独立管理。（保护代码段）
    
- 页式内存管理：内存分为固定大小的页，简化了内存的分配和管理。操作系统维护页表映射虚拟页到物理页。页可能位于磁盘（缺页中断）
    
- 段页式内存管理：结合了段式和页式的优点，先按段划分，每个段再分为多页。在物理内存上本质上是页式内存管理，保留了段式内存管理的优势，可以进行超范围检查（段错误）。
    

  

### 设备管理

- 设备抽象：操作系统通过设备驱动程序将复杂的硬件接口抽象为简单的接口，如文件操作。
    
- 统一管理：所有设备都通过统一的接口与操作系统交互，增加了系统的可管理性和可移植性。
    

  

**不同****操作系统****中的设备管理**：

- Linux：Linux将所有设备抽象为文件，通过文件系统中的特殊文件（如/dev下的设备文件）来管理。
    
- Windows：Windows使用设备驱动程序和设备管理器来管理设备，不完全遵循“一切皆文件”的Unix哲学，而是通过API调用管理设备。（句柄）
    

  

小实验：终端之间发送消息

  

## Linux操作系统


### Linux Kernel

Linux内核是整个Linux操作系统的心脏，负责与系统的所有硬件进行交互，同时也为上层的应用程序提供核心服务的支持。


- 进程管理 (fork, exec)
    
- 内存管理 (malloc, free)
    
- 文件系统 (ext4, btrfs, xfs, vfat)
    
- 服务管理 (systemctl)
    
- 网络协议 (tcp/ip stack)
    
- 硬件驱动 (linux 是支持硬件驱动最多的操作系统)
    

  

### Linux发行版

Linux发行版是基于Linux内核，结合一系列用户程序、工具和管理系统的完整操作系统。每个发行版都可能有自己的目标群体、设计哲学、包管理系统、默认桌面环境和预安装的软件集。这样的多样化使得不同的Linux发行版适用于不同的用途和用户需求。

#### 基于DPKG/APT的系统

这些系统使用`dpkg`包管理工具，通常配合`APT`（高级包工具）来处理软件的安装、更新和依赖性管理。

1. Debian
    
    1. 特点：极其稳定，具有广泛的社区支持，是许多其他Linux发行版的基础。
        
    2. 重要性：被视为最纯粹的社区驱动Linux发行版之一。
        
2. Ubuntu
    
    1. 特点：用户友好，支持广泛，适合新手和经验丰富的用户。
        
    2. 派生版本：包括Kubuntu（使用KDE桌面环境）、Lubuntu（轻量级，使用LXDE桌面环境）等。
        
3. Kali Linux
    
    1. 特点：专为网络安全和渗透测试设计。
        
4. Raspbian
    
    1. 特点：为树莓派硬件优化的发行版。
        

#### 基于RPM/YUM的系统

这些系统使用`RPM`包格式，并通过`yum`或现在更常用的`dnf`工具进行包管理。

1. Red Hat Enterprise Linux (RHEL)
    
    1. 特点：业界领先的商业发行版，提供长期的支持和稳定性，适用于企业环境。
        
2. Fedora
    
    1. 特点：RHEL的上游源，集成最新的开源技术。
        
3. CentOS
    
    1. 特点：与RHEL高度兼容，主打稳定性和免费使用，但现在已经转型为CentOS Stream，作为Fedora和RHEL之间的中间层。
        

#### 基于PACMAN的系统

使用`pacman`作为其包管理器，特点是滚动更新。

1. Arch Linux
    
    1. 特点：轻量级，高度可定制，适合有经验的用户。
        
2. Manjaro
    
    1. 特点：基于Arch，但更注重用户友好和易用性。
        

#### 其他发行版

1. Slackware
    
    1. 特点：Linux的最早发行版之一，注重简洁性和UNIX传统。
        
2. SUSE/ openSUSE
    
    1. 特点：强大的企业支持和社区版，使用`zypper`包管理器。
        
3. Gentoo
    
    1. 特点：所有软件都是从源代码编译，为高度定制化和优化提供可能。
        
4. Alpine Linux
    
    1. 特点：轻量级，安全，主要用于服务器和容器环境，使用`apk`包管理。
        

  

  

## 实际操作

[2024春新人培训服务器](https://diangroup.feishu.cn/sheets/RpYvsgKzRhWpYht00sGcZSIzn3k?from=from_copylink)

### SSH

SSH，即Secure Shell，是一种网络协议，用于加密方式安全地连接和管理远程计算机。

SSH也是我们远程连接服务器的工具（这里使用OpenSSH）。

SSH 的软件架构是服务器-客户端模式（Server - Client）。在这个架构中，SSH 软件分成两个部分：向服务器发出请求的部分，称为客户端（client），OpenSSH 的实现为 ssh；接收客户端发出的请求的部分，称为服务器（server），OpenSSH 的实现为 sshd。

  

#### SSH登录

基本的SSH连接命令格式为：

```Bash
ssh username@hostname -p port
```

其中，`username` 是你在远程机器上的用户名，`hostname` 是远程机器的域名或IP地址，`port`是端口号。如果不指定的话，SSH的默认端口号是`22`。如果连接成功，将被提示输入该用户的密码。

  

#### 跳板机

跳板机是一种用于从一个网络到另一个网络的中转站。

暂时无法在飞书文档外展示此内容

**注意**：跳板机是一种在团队外部（指启明学院亮胜楼七楼）访问团队内网的方式，限制内网的访问是对团队内网的一种保护。大家连接服务器一定要注意安全问题。跳板机带宽有限，传输文件请到团队内网，就是要多来团队坐坐啦～

团队跳板机：dian.org.cn

账号：public

密码：ljzzy@beibei

端口：2222 2223（在韵苑宿舍使用2223，登不上就试试另一个）

```Bash
 ssh -J public@dian.org.cn:2222 lalala@192.168.0.233 -p 6666
```

上述指令的作用是，通过跳板机（`public`账号，`dian.org``.cn`地址，`222`端口）连接`192.168.0.233`地址的服务器，用户是`lalala`，端口是`6666`。

  

#### SSH config配置

可以在`~/.ssh/config`文件中定义SSH连接的配置，以简化命令。例如：

```Bash
Host myserver
  HostName server.example.com
  User myusername
  Port 2222
```

之后，可以简单地使用`ssh myserver`命令来连接。

  

假设你需要通过跳板机`jump.example.com`来访问内网服务器`internal.example.com`，配置如下：

```Bash
Host jumpbox
  HostName jump.example.com
  User jumpuser
  
Host internal
  HostName internal.example.com
  User internaluser
  ProxyJump jumpbox
```

使用`ssh internal`命令，SSH首先连接到跳板机，然后从跳板机连接到内部服务器。

  

#### SCP传输文件

https://www.runoob.com/linux/linux-comm-scp.html

SCP (Secure Copy) 是一种利用SSH进行安全文件传输的工具。基本用法如下：

- 从本地复制到远程：
    

```Bash
scp localfile username@hostname:/remote/directory
```

- 从远程复制到本地：
    

```Bash
scp username@hostname:/remote/file /local/directory
```

  

#### 使用公私钥认证

使用SSH公私钥认证可以增加安全性，免去每次登录输入密码的繁琐。设置步骤包括：

1. 生成密钥对： 在本地计算机上运行以下命令，一直回车使用默认即可：
    

```Bash
ssh-keygen -t rsa -C "lalala"
```

2. 生成的密钥对默认保存在`~/.ssh/id_rsa`（私钥）和`~/.ssh/id_rsa.pub`（公钥）。
    
3. 上传公钥到远程服务器： 将公钥内容添加到远程服务器的`~/.ssh/authorized_keys`文件中，如果没有该文件请手动创建。
    

```Bash
ls -alF
mkdir .ssh
cd .ssh
touch authorized_keys
echo "your key" >> authorized_keys
cat authorized_keys
```

4. 也可以使用可`ssh-copy-id`命令传输公钥到服务器（这个指令不会检查重复，也就是说运行多次会在服务器`authorized_keys`文件中多次写入）：
    

```Bash
ssh-copy-id -i ~/.ssh/id_rsa.pub user@server
```

  

请动手尝试一下，通过公私钥实现SSH免密登录服务器

  

### Linux目录与文件

#### Linux目录树

在Linux中，文件系统是以一种层次结构的目录树的形式组织的，其中每个位置都有其特定用途。

|   |   |
|---|---|
|目录|用途|
|/|根目录，所有文件和目录的起点|
|/bin|存放基本用户命令的二进制文件|
|/boot|启动Linux时使用的文件，如内核|
|/dev|设备文件，代表或控制硬件设备|
|/etc|系统配置文件|
|/home|用户的个人目录，下含所有用户的个人目录|
|/lib|系统库文件和内核模块|
|/mnt|临时挂载的文件系统|
|/opt|附加的应用程序安装目录|
|/proc|虚拟目录，提供系统和进程的信息|
|/root|root用户的个人目录|
|/sbin|系统管理命令的二进制文件|
|/tmp|临时文件存储|
|/usr|用户安装的软件和文件的主要存储目录|
|/var|存储经常变化的文件，如日志、邮件等|

  

#### 绝对路径

绝对路径指从根目录（`/`）开始的完整路径，它提供了从文件系统的最顶层到目标文件或目录的完整路径。因为绝对路径从根目录开始，所以它总是以正斜杠（`/`）开头。

示例：

- `/home/username/Documents/file.txt`
    
- `/etc/nginx/nginx.conf`
    

这些路径都明确指出了文件系统中的确切位置，无论当前工作目录在哪里。

#### 相对路径

相对路径基于当前工作目录，而不是从根目录开始。它不以斜杠开始，而是从当前目录或其子目录开始描述位置。

示例：

- 如果你的当前目录是`/home/username`，则`Documents/file.txt`指的是`/home/username/Documents/file.txt`。
    
- `./config/settings.ini`表示在当前目录下的`config`子目录中的`settings.ini`文件。
    

使用相对路径可以更灵活地引用目录和文件，特别是在编写脚本或执行命令时不想硬编码完整路径的情况下。

  

#### 特殊目录符号：`.`和`..`

在Unix和类Unix系统中，`.`和`..`是两个非常重要的特殊目录项：

- `.` 代表当前目录。这意味着当你使用命令或脚本引用`.`时，它指的是你当前所在的目录。
    
- `..` 代表上级目录（父目录）。使用`..`可以在路径中向上移动一级。
    

  

#### Linux基础文件操作

1. `ls` - 列出目录内容
    

- `-l`: 长格式列出，显示详细信息。
    
- `-a`: 显示所有文件，包括隐藏文件（以`.`开始的文件）。
    
- `-h`: 与`-l`一起使用时，显示易读的文件大小（例如，KB、MB）。
    
- `-F`:使用`-F`参数后，`ls`命令会在列出的文件名后添加特定的字符
    
    - `/`：表示目录（directory）
        
    - `*`：表示可执行文件（executable file）
        
    - `@`：表示符号链接（symbolic link）
        
    - `=`：表示套接字（socket）
        
    - `|`：表示命名管道（named pipe），也称为FIFO
        

```Bash
ls -la   # 列出当前目录下所有文件（包括隐藏文件）的详细信息
```

2. `cd` - 更改当前目录
    

- `..`: 返回上级目录。
    
- `~`: 返回用户的主目录。
    

```Bash
cd ../   # 返回上一级目录
cd ~     # 切换到用户的主目录
```

3. `mkdir` - 创建新目录
    

- `-p`: 允许创建多级目录，即如果父目录不存在，也会一并创建。
    

```Bash
mkdir -p new_dir/sub_dir   # 创建一个新目录及其子目录
```

4. `rmdir` - 删除空目录
    

- 通常不带参数：只能删除空目录。
    

```Bash
rmdir empty_dir   # 删除一个空目录
```

5. `touch` - 创建空文件或更新文件时间戳
    

- 无特殊参数：主要用于创建空文件或更改文件的访问和修改时间。
    

```Bash
touch new_file.txt   # 创建一个空文件或更新现有文件的时间戳
```

6. `cp` - 复制文件或目录
    

- `-r`: 递归复制目录及其内容。
    
- `-i`: 在覆盖文件前询问用户。
    

```Bash
cp -r source_dir target_dir   # 递归复制目录
cp -i source_file target_file # 复制文件前询问
```

7. `mv` - 移动或重命名文件或目录
    

- `-i`: 在覆盖文件前询问用户。
    

```Bash
mv -i old_name new_name   # 重命名或移动文件或目录
```

8. `rm` - 删除文件或目录
    

- `-r`: 递归删除目录及其内容。
    
- `-f`: 强制删除，忽略不存在的文件，不提示。
    

```Bash
rm -rf directory_name   # 递归且强制删除目录及其内容
```

9. `find` - 在目录树中查找文件
    

- `-name`: 根据文件名查找。
    
- `-type`: 指定文件类型（如`f`代表普通文件，`d`代表目录）。
    

```Bash
find /path/to/search -name "*.txt"   # 查找所有.txt文件
```

10. `grep` - 在文件中搜索文本
    

- `-i`: 忽略大小写。
    

```Bash
grep -i "search_term" file.txt   # 在文件中不区分大小写地搜索文本
```

  

查看一下之前创建的`authorized_keys`文件的修改日期，更新一下它的修改时间。

搜索一下`authorized_keys`文件中，之前在key中添加的注释。

  

### 用户管理

在Linux中，用户管理是一个核心的系统管理任务，涉及到用户账号的创建、修改、删除等操作。这些任务通过一系列命令完成，每个命令都支持多种选项和参数，允许系统管理员灵活地管理系统用户。

https://www.runoob.com/linux/linux-user-manage.html

#### 基本指令

1. `useradd`：用于创建新用户账户的命令。
    

- `-m`：创建用户的家目录。
    
- `-d <path>`：指定用户的家目录路径，如果不指定并使用`-m`，系统将创建默认的家目录（通常是`/home/username`）。
    
- `-s <path>`：指定用户的默认登录shell，例如`/bin/bash`。
    

示例：

```Bash
useradd -m -d /home/newuser -s /bin/bash
```

2. `userdel`：用于删除用户账户。
    

- `-r`：删除用户及其家目录。
    

示例：

```Bash
userdel -r olduser
```

这将删除`olduser`的用户账号及其家目录。

3. `usermod`
    

用于修改已存在用户的配置。

- `-d <path>`：修改用户的家目录。
    
- `-l <newname>`：更改用户的登录名称。
    
- `-s <path>`：更改用户的默认登录shell。
    
- `-G <groups>`：更改用户所属的额外组，使用此选项时应列出用户应属于的所有组，不在列表中的组将被移除用户的组列表。
    
- `-aG <groups>`：向用户的现有组列表添加新组，不移除用户当前所属的任何组。
    

示例：

```Bash
# 将oldusername的用户名改为newusername，并移动其家目录。
usermod -l newusername -d /newhome/newusername -m oldusername 

# 将newuser添加到sudo用户组
usermod -aG sudo newuser
```

上面的命令

4. `passwd`：用于管理用户密码。
    

- 无特殊参数：直接修改指定用户的密码。
    

示例：

```Bash
passwd username
```

运行后，系统将提示输入新的密码。

#### sudo

在Linux系统中，`sudo`（superuser do）命令是一种非常强大的工具，它允许普通用户以另一个用户的身份，通常是超级用户（root），执行命令。这提供了一种安全的方式来赋予用户执行特定高权限操作的能力而无需分享超级用户的密码。

1. 执行命令：
    

```Bash
sudo <command>
```

- 这将以超级用户的权限执行`<command>`。
    

2. 切换到root用户：
    

```Bash
sudo -i
```

或

```Bash
sudo su
```

- 这两个命令都会启动一个root用户的shell。
    

  

**注意事项**：运行 `sudo` 命令意味着将以超级用户权限（root）执行命令。这种权限允许用户对系统进行任何修改，包括那些可能对系统稳定性和安全性产生重大影响的操作。因此，在使用 `sudo` 执行命令前，应确保了解该命令的功能和潜在影响。

在使用 `sudo` 执行命令前，应确保了解该命令的功能和潜在影响。

在使用 `sudo` 执行命令前，应确保了解该命令的功能和潜在影响。

在使用 `sudo` 执行命令前，应确保了解该命令的功能和潜在影响。

Linux系统中，root账户拥有最高的权限。为了安全，一般会禁止使用root账户ssh登录服务器。

请使用以上指令，创建一个新的用户，设置用户名和密码，并将其添加到sudo用户组使其拥有执行sudo的权限。请记住你的用户名和密码！

然后使用你设置的用户重新登录服务器。

  

#### 文件系统权限

https://www.runoob.com/linux/linux-comm-chmod.html

Linux使用权限和所有权来控制用户对文件和目录的访问。每个文件和目录都有三组权限：

- 所有者权限（Owner）
    
- 组权限（Group）
    
- 其他用户权限（Others）
    

每组可以被赋予以下权限：

- 读取（r）: 允许读取文件内容或列出目录中的内容。
    
- 写入（w）: 允许修改文件或目录中的内容。
    
- 执行（x）: 允许执行文件或进入目录。
    

##### **数字表示法**

在数字表示法中，每种权限类型被赋予一个数值：

- 4 代表 读（r）
    
- 2 代表 写（w）
    
- 1 代表 执行（x）
    
- 0 代表 无权限
    

将这些数字相加来创建一组权限。例如，要赋予读和执行权限（不赋予写权限），将对应的数字相加：`4 (读) + 1 (执行) = 5`。

##### **三组权限的数字表示**

要设置文件或目录的权限，需要为所有者、组和其他用户分别设定权限，然后将这三个数字放在一起。例如：

- 7 （4+2+1）: 读 + 写 + 执行
    
- 6 （4+2+0）: 读 + 写
    
- 5 （4+0+1）: 读 + 执行
    
- 4 （4+0+0）: 只读
    
- 3 （0+2+1）: 写 + 执行
    
- 2 （0+2+0）: 只写
    
- 1 （0+0+1）: 只执行
    
- 0 （0+0+0）: 无权限
    

##### **查看权限**

使用`ls -l`命令可以查看文件或目录的权限。例如：

```Bash
-rwxr-xr-- 1 owner group 2340 Jan 20 12:00 example.txt
```

这表示`example.txt`文件的所有者有读、写和执行权限；同组用户有读和执行权限；其他用户只有读权限。

##### **修改权限**

1. `chmod`: 修改文件或目录的权限。
    

```Bash
chmod 755 filename
```

2. `chown`: 改变文件或目录的所有者和/或所属组。
    

```Bash
chown username:groupname filename
```

  

### 终端编辑器

https://www.runoob.com/linux/linux-vim.html

- vim编辑器
    

Vim 是一种强大的文本编辑器，以其模式编辑功能而闻名，广泛用于编程和各种文本编辑任务。它是从 vi 编辑器发展而来的，提供了很多增强功能和改进。Vim 分为多种模式，主要包括普通模式、插入模式和命令行模式，每种模式都有不同的功能和用途。

1. 普通模式：
    
    1. 默认模式，用于移动光标、复制、粘贴、剪切和删除文字（这些操作不需要进入插入模式）。
        
    2. 示例命令：
        
        - `h, j, k, l`：分别向左、下、上、右移动光标。
            
        - `dd`：删除（剪切）当前行。
            
        - `yy`：复制当前行。
            
        - `p`：在当前位置粘贴。
            
2. 插入模式：
    
    1. 在此模式下，可以输入文本。
        
    2. 进入方式：在普通模式下按 `i`（在光标前插入）、`a`（在光标后插入）或 `o`（在当前行下方新开一行并插入）。
        
    3. 退出到普通模式：按 `Esc` 键。
        
3. 命令行模式（也称为扩展命令模式）：
    
    1. 用于输入更复杂的命令，如保存文件、查找和替换文本、文件操作等。
        
    2. 进入方式：在普通模式下按 `:`。
        
    3. 示例命令：
        
        - `:w`：保存文件。
            
        - `:q`：退出 Vim。
            
        - `:wq` 或 `:x`：保存并退出。
            
        - `:/pattern`：搜索 `pattern`。
            
        - `:%s/old/new/g`：将整个文件中的 `old` 替换为 `new`。
            

  

你新建的用户是不是还没有免密登录？快试试好用的vim编辑器！

在你新建的用户下创建`authorized_keys`文件，使用vim将你的公钥粘贴进去。

试试免密登录！

  

### 包管理工具

在Linux环境下，包管理工具是用来自动化安装、配置、更新和移除软件包的系统。不同的Linux发行版常用不同的包管理系统。Ubuntu，作为一个基于Debian的发行版，主要使用APT（Advanced Packaging Tool）作为其包管理工具。

#### APT 的基本命令

1. **更新包索引**：
    
    ```Bash
    sudo apt update
    ```
    
      这个命令会同步源服务器上的包索引到本地，以确保安装、升级软件时使用最新的版本。
    
2. **安装软件包**：
    
    ```Bash
    sudo apt install <package_name>
    ```
    
      替换 `<package_name>` 为所需安装的软件包名。
    
3. **卸载软件包**：
    
    ```Bash
    sudo apt remove <package_name>
    ```
    
      删除指定的软件包，但保留配置文件。
    
4. **完全移除软件包及其配置文件**：
    
    ```Bash
    sudo apt purge <package_name>
    ```
    
5. **升级所有已安装的软件包**：
    
    ```Bash
    sudo apt upgrade
    ```
    
      升级所有可升级的软件包，不删除当前已安装的任何软件包也不安装新软件包。
    
6. **自动清除不再需要的软件包**：
    
    ```Bash
    sudo apt autoremove
    ```
    
      清除系统不再需要的孤立软件包。
    
7. **搜索软件包**：
    
    ```Bash
    apt search <keyword>
    ```
    
      根据关键词搜索软件包。
    
8. **显示软件包详情**：
    
    ```Bash
    apt show <package_name>
    ```
    

#### 使用APT的注意事项

- 使用 `sudo` 执行APT命令以获得必要的权限。
    
- 在进行重要操作前确保系统的包索引是最新的。
    
- 定期执行 `sudo apt update` 和 `sudo apt upgrade` 以保持系统更新。
    

  

