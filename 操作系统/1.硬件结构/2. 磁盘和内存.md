# 磁盘比内存慢几万倍？
CPU 内部也有存储数据的组件，比如**寄存器、CPU L1/L2/L3 Cache** 也都是属于存储设备，只不过它们能存储的数据非常小，但是它们因为靠近 CPU 核心，所以访问速度都非常快，快过硬盘好几个数量级别。
「**存储器的层次结构**」：
![[Pasted image 20250323105253.png]]
## 存储器的层次结构
 CPU 中的**寄存器**，处理速度是最快的，但是能存储的数据也是最少的
 **CPU Cache**，中文称为 CPU 高速缓存，处理速度相比寄存器慢了一点，但是能存储的数据也稍微多了一些。
 CPU Cache 通常会分为 **L1、L2、L3 三层**，其中 L1 Cache 通常分成「数据缓存」和「指令缓存」，L1 是距离 CPU 最近的，因此它比 L2、L3 的读写速度都快、存储空间都小。
 寄存器和 CPU Cache 都是在 CPU 内部，跟 CPU 挨着很近，因此它们的读写速度都相当的快，但是能存储的数据很少。
 **对于存储器，它的速度越快、能耗会越高、而且材料的成本也是越贵的，以至于速度快的存储器的容量都比较小。**
 ![[Pasted image 20250323105836.png]] 
### 寄存器
每个寄存器可以用来存储一定的字节（byte）的数据。比如：
- 32 位 CPU 中大多数寄存器可以存储 `4` 个字节；
- 64 位 CPU 中大多数寄存器可以存储 `8` 个字节
### CPU Cache
CPU Cache 用的是一种叫 **SRAM（*Static Random-Access* Memory，静态随机存储器）** 的芯片。
SRAM 之所以叫「静态」存储器，是因为只要有电，数据就可以保持存在，而一旦断电，数据就会丢失了。
CPU 的高速缓存，通常可以分为 L1、L2、L3 这样的三层高速缓存，也称为一级缓存、二级缓存、三级缓存。
![[Pasted image 20250323110620.png]]
#### L1 高速缓存
L1 高速缓存的访问速度几乎和寄存器一样快。
每个 CPU 核心都有一块属于自己的 L1 高速缓存，指令和数据在 L1 是分开存放的，所以 L1 高速缓存通常分成**指令缓存**和**数据缓存**。
#### L2 高速缓存
 L2 高速缓存位置比 L1 高速缓存距离 CPU 核心 更远，它大小比 L1 高速缓存更大。
#### L3 高速缓存
L3 高速缓存通常是多个 CPU 核心共用的，位置比 L2 高速缓存距离 CPU 核心 更远，大小也会更大些，访问速度相对也比较慢一些。
### 内存
内存使用的是一种叫作 **DRAM （*Dynamic Random Access Memory*，动态随机存取存储器）** 的芯片。
相比 SRAM，DRAM 的密度更高，功耗更低，有更大的容量，而且造价比 SRAM 芯片便宜很多。
 DRAM 之所以被称为「动态」存储器，只有不断刷新，数据才能被存储起来。
###  SSD/HDD 硬盘
SSD（*Solid-state disk*）就是我们常说的固体硬盘，断电后数据还是存在的，而内存、寄存器、高速缓存断电后数据都会丢失。
机械硬盘（*Hard Disk Drive, HDD*），它是通过物理读写的方式来访问数据的，因此它访问速度是非常慢的。
## 存储器的层次关系
![[Pasted image 20250323115320.png]]
**每个存储器只和相邻的一层存储器设备打交道，并且存储设备为了追求更快的速度，所需的材料成本必然也是更高，也正因为成本太高，所以 CPU 内部的寄存器、L1\L2\L3 Cache 只好用较小的容量，相反内存、硬盘则可用更大的容量，这就我们今天所说的存储器层次结构**。
当 CPU 需要访问内存中某个数据的时候，如果寄存器有这个数据，CPU 就直接从寄存器取数据即可，如果寄存器没有这个数据，CPU 就会查询 L1 高速缓存，如果 L1 没有，则查询 L2 高速缓存，L2 还是没有的话就查询 L3 高速缓存，L3 依然没有的话，才去内存中取数据。
![[Pasted image 20250323115705.png]]
存储层次结构也形成了**缓存**的体系。
